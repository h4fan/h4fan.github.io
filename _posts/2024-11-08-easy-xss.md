---
layout: post
title:  非交互xss
tags: [xss,bugbounty,javascript]
---

最近挖了一个xss漏洞，需要使用非交互的xss payload，简单记录。

## 故事
由于这是一个简单的oneventxss，不禁让我想起一个故事，于是我问了一下chatglm。  
glm回答如下：
```
这个故事的大意是这样的：

一位工厂老板遇到了一个复杂的机械故障，无论如何都无法解决，这严重影响了生产。在无计可施的情况下，他请来了一位著名的机械专家。专家在机器周围观察了一番后，用粉笔在某个部位画了一个圈，并告诉老板问题出在这个地方。随后，他开出了1000元的咨询费。

老板看到这个简单的动作后，觉得专家收费过高，因为画一个圈看似是件非常简单的事情。专家于是解释说，画圈只值1元钱，但知道在哪里画圈则值999元。
```

## on event xss
该xss是一个属性xss，即输出在a标签的属性中。  
那么，常规的方法就是onclick来验证一下。  
但是，如果你参与过bug bounty就知道，非交互与交互的xss，bounty差异是非常大的。因此，我们需要找一个非交互的xss payload，即用户只要打开这个页面，就会自动触发。

## 非交互xss
burp的[xss cheat sheet](https://portswigger.net/web-security/cross-site-scripting/cheat-sheet)已经为我们收集了大量payload。
我们只需要找一个满足条件的payload进行测试。 
筛选完a标签，筛选完浏览器，可以找到`Event handlers that do not require user interaction`。

## 奇怪问题
不过，碰到一个奇怪的问题，就是使用不同的方式打开页面，居然一个可以执行成功，一个没有反应。  
由于是dom操作引起的xss，起初以为是innerHTML的问题，但是本地建一个页面，使用innerHTML，并没有差异。由于在闭源APP里面，暂未继续研究。

## 其他
由于是在移动端，有另一个事件也能达到点击触发事件。另外，onanimation对应的事件也是一个有用的payload。  
另外还有一个收集[cspbypass](https://github.com/renniepak/CSPBypass)的网站。
